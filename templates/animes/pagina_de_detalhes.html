{% extends 'base.html' %}
{% load static %}

{% block title %}{{ anime.title|default:"Anime" }} - OtakuVerse{% endblock %}

{% block content %}
<main class="main-content">
    {% if anime %}
    <section class="featured-section">
        <div class="container" style="display: flex; flex-wrap: wrap; gap: 2rem; justify-content: center;">

            <div class="anime-card" style="max-width: 300px; flex: 1 1 300px;">
                <div class="anime-poster" style="aspect-ratio: 3/4;">
                    <img src="{{ anime.images.jpg.image_url }}" alt="{{ anime.title }}">
                    <div class="anime-overlay">
                        <div class="anime-info">
                            <div class="anime-score">⭐ {{ anime.score|default:"N/A" }}</div>
                            <div class="anime-year">{{ anime.year|default:"TBA" }}</div>
                        </div>
                    </div>
                </div>
                <div class="anime-details">
                    <h3 class="anime-title">{{ anime.title }}</h3>
                    {% if anime.title_english %}
                        <p class="anime-subtitle">{{ anime.title_english }}</p>
                    {% endif %}
                </div>
            </div>

            <div style="max-width: 700px; flex: 1 1 500px; color: var(--text-primary);">
                <div style="margin-bottom: 1rem;">
                    {% if anime.type %}
                        <span style="margin-right: 1rem; font-size: 1rem; padding: 0.3rem 0.6rem; background: rgba(221,160,221,0.8); border-radius: 6px;">{{ anime.type }}</span>
                    {% endif %}
                    {% if anime.episodes %}
                        <span style="margin-right: 1rem; font-size: 1rem; padding: 0.3rem 0.6rem; background: rgba(255,182,193,0.8); border-radius: 6px;">{{ anime.episodes }} eps</span>
                    {% endif %}
                    {% if anime.status %}
                        <span style="margin-right: 1rem; font-size: 1rem; padding: 0.3rem 0.6rem; background: rgba(135,206,235,0.8); border-radius: 6px;">{{ anime.status }}</span>
                    {% endif %}
                    {% if anime.rating %}
                        <span style="margin-right: 1rem; font-size: 1rem; padding: 0.3rem 0.6rem; background: rgba(255,182,193,0.8); border-radius: 6px;">{{ anime.rating }}</span>
                    {% endif %}
                </div>

                {% if anime.synopsis %}
                <div style="margin-bottom: 1.5rem;">
                    <h2 style="font-family: 'Comfortaa', cursive; font-size: 1.5rem; margin-bottom: 0.5rem; color: var(--text-accent);">Sinopse</h2>
                    <p style="line-height: 1.6; color: var(--text-secondary);">{{ anime.synopsis }}</p>
                </div>
                {% endif %}

                <div style="display: flex; flex-wrap: wrap; gap: 1rem;">
                    {% if anime.genres %}
                        <div>
                            <h3 style="font-weight: 600; color: var(--text-accent);">Gêneros:</h3>
                            <p>{{ anime.genres|join:", " }}</p>
                        </div>
                    {% endif %}

                    {% if anime.studios %}
                        <div>
                            <h3 style="font-weight: 600; color: var(--text-accent);">Estúdios:</h3>
                            <p>{{ anime.studios|join:", " }}</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    {% else %}
    <div class="error-banner" role="alert">
        <p>Não conseguimos carregar os detalhes do anime no momento. Tente novamente mais tarde.</p>
    </div>
    {% endif %}
</main>
{% endblock %}
