{% extends "base.html" %}
{% load static %}

{% block title %}Pedidos de amizade — OtakuVerse{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'users/account.css' %}">
<main class="page">
  <h1 class="h1">Pedidos de amizade</h1>
  <p class="sub">Aprove ou ignore solicitações recebidas.</p>

  <div class="tabs">
    <a class="tab" href="{% url 'users:friends_list' %}">Lista</a>
    <a class="tab is-active" href="{% url 'users:friends_requests' %}">Pedidos</a>
  </div>

  <section class="card grid">
    <div class="list">
      {% for r in requests %}
      <article class="item">
        <img src="{{ r.sender_avatar|default_if_none:static('users/default-avatar.png') }}" alt="">
        <div>
          <h4>{{ r.sender_name }}</h4>
          <p>@{{ r.sender_username }} • enviou em {{ r.created_at|date:"d/m/Y" }}</p>
        </div>
        <div class="actions">
          <form method="post" action="{% url 'users:friend_accept' r.id %}">{% csrf_token %}
            <button class="btn btn-primary">Aceitar</button>
          </form>
          <form method="post" action="{% url 'users:friend_reject' r.id %}">{% csrf_token %}
            <button class="btn">Recusar</button>
          </form>
        </div>
      </article>
      {% empty %}
      <div class="center">
        <p class="sub">Nenhum pedido no momento.</p>
        <a class="btn btn-ghost" href="{% url 'users:friends_list' %}">Voltar à lista</a>
      </div>
      {% endfor %}
    </div>
  </section>
</main>
{% endblock %}
